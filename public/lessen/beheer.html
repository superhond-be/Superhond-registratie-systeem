<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lessenbeheer – Superhond</title>

  <link rel="stylesheet" href="/css/style.css?v=0.19.8" />
  <script src="/js/layout.js?v=0.19.8" defer></script>
  <script type="module" src="/js/lessen.beheer.js?v=0.19.8" defer></script>
</head>
<body>
<header id="topbar" class="topbar"></header>

<main class="container">
  <h1 class="page-title">Beheer (lessen samenstellen & bewerken)</h1>

  <div class="card" style="margin-bottom:.75rem">
    <div class="toolbar" style="display:flex;gap:.5rem;flex-wrap:wrap;align-items:center">
      <button id="btn-add" class="btn primary">+ Les toevoegen</button>
      <span class="muted" id="total" style="margin-left:.5rem"></span>

      <span style="flex:1 1 auto"></span>

      <button id="btn-export" class="btn">⬇︎ Export JSON</button>
      <button id="btn-agenda" class="btn">📅 Export agenda.json</button>

      <!-- NIEUW: globale generator-knop -->
      <button id="btn-reeks-gen" class="btn">♻️ Genereer uit reeks</button>

      <label class="btn">
        ⬆︎ Import JSON <input type="file" id="file-import" accept="application/json" hidden>
      </label>
      <a class="btn" href="/">→ Dashboard</a>
    </div>
  </div>

  <div class="table-wrap card">
    <table class="table" id="tbl-lessen">
      <thead>
        <tr>
          <th>Reeks/Naam</th>
          <th>Type</th>
          <th>Locatie</th>
          <th>Thema</th>
          <th>Trainer</th>
          <th>Datum</th>
          <th>Start</th>
          <th>Cap.</th>
          <th class="right">Acties</th>
          <th class="right">Genereer</th>
        </tr>
      </thead>
      <tbody><!-- gevuld via JS --></tbody>
    </table>
  </div>
</main>

<footer id="footer" class="footer"></footer>

<!-- NIEUW: lichtgewicht dialoog voor genereren op basis van een reeks -->
<dialog id="dlg-reeks">
  <form id="form-reeks" method="dialog" class="card" style="min-width:min(92vw,520px)">
    <h3 style="margin-top:0">Genereer lessen uit reeks</h3>

    <div class="row">
      <label>Reeks</label>
      <select id="sel-reeks" class="input" required></select>
    </div>

    <div class="row">
      <label>Starttijd (HH:MM)</label>
      <input id="regen-start" class="input" type="time" value="10:00" required>
    </div>

    <div class="row">
      <label><input id="regen-clear" type="checkbox" checked> Bestaande lessen van deze reeks eerst verwijderen</label>
    </div>

    <menu style="display:flex;gap:.5rem;justify-content:flex-end">
      <button type="submit" class="btn primary">Genereer</button>
      <button type="button" id="regen-cancel" class="btn">Annuleren</button>
    </menu>

    <p id="regen-msg" class="muted" style="margin:.5rem 0 0"></p>
  </form>
</dialog>

<script>
  window.addEventListener('DOMContentLoaded', ()=>{
    SuperhondUI.mount({ title:'Superhond — Lessenbeheer', icon:'📅', back:'/' });
  });
</script>
</body>
</html>
