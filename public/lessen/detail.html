<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Les – Detail</title>
  <!-- RELATIEF naar assets (1 niveau omhoog) -->
  <link rel="stylesheet" href="../assets/css/app.css"/>
</head>
<body>
<header class="topbar">
  <h1>Les – Detail</h1>
  <nav class="breadcrumbs">
    <!-- Relatief terug naar dashboard-map -->
    <a href="../dashboard/">← Terug naar dashboard</a>
  </nav>
</header>

<main class="container">
  <article id="detail" class="card"></article>
</main>

<script type="module">
  // RELATIEVE import
  import { getLesson } from '../assets/js/models.js';

  function qs(k){ return new URL(location.href).searchParams.get(k); }
  function escapeHTML(s=''){
    return String(s)
      .replaceAll('&','&amp;')
      .replaceAll('<','&lt;')
      .replaceAll('>','&gt;')
      .replaceAll('"','&quot;')
      .replaceAll("'",'&#39;');
  }

  const id = qs('id');
  const el = document.getElementById('detail');

  if(!id){
    el.innerHTML = `<p class="muted">Geen ID meegegeven.</p>
                    <p><a class="accent" href="../dashboard/">Terug</a></p>`;
  }else{
    const l = getLesson(id);
    if(!l){
      el.innerHTML = `<p class="muted">Les niet gevonden.</p>
                      <p><a class="accent" href="../dashboard/">Terug</a></p>`;
    }else{
      el.innerHTML = `
        <h2>${escapeHTML(l.title)}</h2>
        <p><strong>Wanneer:</strong> ${l.startISO.replace('T',' ')} → ${l.endISO.replace('T',' ')}</p>
        ${l.trainers?.length ? `<p><strong>Trainers:</strong> ${l.trainers.map(escapeHTML).join(', ')}</p>` : ''}
        ${l.location?.name ? `<p><strong>Locatie:</strong> <a href="${l.location.mapsUrl}" target="_blank" rel="noopener">${escapeHTML(l.location.name)}</a></p>` : ''}
        <p><a class="accent" href="../dashboard/">Terug</a></p>
      `;
    }
  }
</script>
</body>
</html>
