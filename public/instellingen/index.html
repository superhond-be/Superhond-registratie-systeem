<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Superhond ‚Äî Instellingen</title>

  <!-- Centrale UI styles -->
  <link rel="stylesheet" href="../css/style.css?v=0.20.4" />
  <link rel="stylesheet" href="../css/superhond.css?v=0.20.4" />
</head>

<body class="subpage">
  <header id="topbar" class="topbar"></header>

  <main class="container">
    <h1 class="page-title">Instellingen</h1>

    <!-- Publieke/gebruikers-instellingen -->
    <section class="card section--public" aria-labelledby="sec-app">
      <div class="section-header">
        <h2 id="sec-app">App</h2>
        <span class="section-sub">Algemene voorkeuren</span>
      </div>

      <div class="dash-grid" style="grid-template-columns:1fr">
        <div>
          <label class="sidebar-title" for="theme">Themakleur</label>
          <select class="select" id="theme" aria-label="Thema">
            <option value="light">Licht</option>
            <option value="dark" disabled>Donker (binnenkort)</option>
          </select>
        </div>

        <div>
          <label class="sidebar-title" for="density">Tabel-dichtheid</label>
          <select class="select" id="density" aria-label="Tabel-dichtheid">
            <option value="normal">Normaal</option>
            <option value="compact">Compact</option>
          </select>
        </div>

        <div style="margin-top:.75rem;display:flex;gap:.5rem;flex-wrap:wrap">
          <button id="btnSave" class="btn">Bewaren</button>
          <button id="btnReset" class="btn">Herstellen naar standaard</button>
          <span id="saveState" class="muted" role="status" aria-live="polite"></span>
        </div>

        <p class="muted" style="margin-top:.25rem">
          Je voorkeuren worden lokaal bewaard in <code>localStorage</code> en automatisch toegepast op deze site.
        </p>
      </div>
    </section>

    <!-- üõ°Ô∏è Admin-sectie (alleen zichtbaar in admin-modus) -->
    <section class="card section--admin" id="admin-section" style="display:none; margin-top:1rem" aria-labelledby="sec-admin">
      <div class="section-header">
        <h2 id="sec-admin">üõ°Ô∏è Admin</h2>
        <span class="section-sub">Centrale Config & Sheet-schema</span>
      </div>

      <!-- Config -->
      <div class="card" style="margin:0 0 1rem">
        <h3 style="margin-top:0">Centrale Config</h3>
        <div id="cfg-state" class="muted">‚è≥ Laden‚Ä¶</div>
        <form id="cfg-form" class="form-grid" style="margin-top:.5rem">
          <input name="apiBase" class="input" placeholder="https://script.google.com/macros/s/.../exec" required />
          <input name="token"   class="input" placeholder="CFG_TOKEN (admin)" required />
          <button class="btn" type="submit">Opslaan</button>
        </form>
      </div>

      <!-- Schema -->
      <div class="card" style="margin:0">
        <h3 style="margin-top:0">Sheet Schema</h3>

        <div class="tabs" id="tabs">
          <button class="tab active" data-tab="headers">Headers</button>
          <button class="tab" data-tab="ensure">Kolommen toevoegen</button>
          <button class="tab" data-tab="rename">Hernoemen</button>
        </div>

        <!-- HEADERS -->
        <div id="tab-headers">
          <div style="display:flex;gap:.5rem;align-items:center;margin:.5rem 0">
            <button id="btn-load-headers" class="btn">Ververs headers</button>
            <button id="btn-ensure-all" class="btn">Ensure alle tabs</button>
          </div>
          <pre id="headers-out" class="muted" style="white-space:pre-wrap">Nog niets geladen.</pre>
        </div>

        <!-- ENSURE -->
        <div id="tab-ensure" style="display:none">
          <form id="ensure-form" class="form-grid" style="margin-top:.5rem">
            <input name="tab"     class="input" placeholder="Tabnaam (bv. Klanten)" required />
            <input name="columns" class="input" placeholder="Nieuwe kolommen, komma-gescheiden" />
            <button class="btn" type="submit">Toevoegen</button>
          </form>
          <div id="ensure-state" class="muted" style="margin-top:.5rem"></div>
        </div>

        <!-- RENAME -->
        <div id="tab-rename" style="display:none">
          <form id="rename-form" class="form-grid" style="margin-top:.5rem">
            <input name="tab"  class="input" placeholder="Tabnaam (bv. Klanten)" required />
            <input name="from" class="input" placeholder="Van (oude header)" required />
            <input name="to"   class="input" placeholder="Naar (nieuwe header)" required />
            <button class="btn" type="submit">Hernoemen</button>
          </form>
          <div id="rename-state" class="muted" style="margin-top:.5rem"></div>
        </div>
      </div>
    </section>
  </main>

  <footer id="footer" class="footer"></footer>

  <!-- Scripts -->
  <script src="../js/layout.js?v=0.20.4" defer></script>
  <script src="../js/toast.js?v=0.20.4" defer></script>
  <script type="module" src="./instellingen.js?v=0.20.4"></script>

  <!-- Mount met terugknop -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.SuperhondUI?.mount) {
        SuperhondUI.mount({ title:'Instellingen', icon:'‚öôÔ∏è', back:'../dashboard/' });
      }
    });
  </script>

  <noscript>
    <p style="padding:1rem;color:#b91c1c">JavaScript is vereist om instellingen te beheren.</p>
  </noscript>
</body>
</html>
