// dashboard-badges.js
// Zet het aantal actieve klassen en reeksen in de dashboard-tegels

import { ensureMigrated, getKlassen, getReeksen, isActiefStatus } from '../js/store.js';

document.addEventListener('DOMContentLoaded', () => {
  // Zorg dat oude 'superhond-db' data wordt gemigreerd naar losse buckets
  ensureMigrated();

  // Tel alleen klassen/reeksen met status exact "actief"
  const classesCount = getKlassen().filter(k => isActiefStatus(k.status)).length;
  const seriesCount  = getReeksen().filter(r => isActiefStatus(r.status)).length;

  // Update klassen-tegel
  const kc = document.getElementById('klassen-badge');
  const ks = document.getElementById('klassen-sub');
  if (kc) kc.textContent = classesCount;
  if (ks) ks.textContent = `${classesCount} actief`;

  // Update reeksen-tegel
  const rc = document.getElementById('reeksen-badge');
  const rs = document.getElementById('reeksen-sub');
  if (rc) rc.textContent = seriesCount;
  if (rs) rs.textContent = `${seriesCount} actief`;
});
