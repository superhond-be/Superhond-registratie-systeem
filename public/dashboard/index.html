<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Superhond — Dashboard</title>

  <!-- ✅ Centrale Google Apps Script URL -->
  <meta name="superhond-exec"
    content="https://script.google.com/macros/s/AKfycbyxPiFzgCcMplcC5kyFgVPHcIIjDXcQoWdPMEvI2zj-aP6ud8mG49xicSHd8SUcG22sPw/exec">

  <!-- Centrale UI -->
  <link rel="stylesheet" href="../css/style.css?v=0.27.3" />
  <link rel="stylesheet" href="../css/superhond.css?v=0.27.3" />

  <!-- Dashboard: gele topbalk forceren -->
  <style>
    body.dashboard-page #topbar,
    body.dashboard-page #topbar .topbar-inner {
      background: var(--accent, #f4c400) !important;
      color: #000 !important;
    }
    body.dashboard-page .btn-back {
      border-color: #e5e7eb;
      background: #fff;
      color: #111827;
    }
  </style>
</head>

<body class="dashboard-page">
  <header id="topbar"></header>

  <main class="container" role="main">
    <h1 class="page-title">Hoofdmenu</h1>

    <!-- Tegels -->
    <nav class="tiles" aria-label="Hoofdmenu">
      <a class="tile" href="../klanten/"><span class="tile-icon">👤</span><div class="tile-body"><span class="tile-title">Klanten</span></div></a>
      <a class="tile" href="../honden/"><span class="tile-icon">🐶</span><div class="tile-body"><span class="tile-title">Honden</span></div></a>
      <a class="tile" href="../klassen/"><span class="tile-icon">📚</span><div class="tile-body"><span class="tile-title">Klassen</span></div></a>
      <a class="tile" href="../lessen/"><span class="tile-icon">📅</span><div class="tile-body"><span class="tile-title">Lessen</span></div></a>
      <a class="tile" href="../strippenkaarten/"><span class="tile-icon">🎫</span><div class="tile-body"><span class="tile-title">Strippenkaarten</span></div></a>
      <a class="tile" href="../over/"><span class="tile-icon">ℹ️</span><div class="tile-body"><span class="tile-title">Over</span></div></a>
    </nav>

    <!-- Agenda -->
    <section class="card" style="margin-top:1rem">
      <h2 style="margin:0 0 .5rem">Agenda</h2>
      <div id="agenda-loader" class="muted">⏳ Laden…</div>
      <div id="agenda-error" class="error" style="display:none"></div>
      <div class="table-wrap" id="agenda-table-wrap" style="display:none;">
        <table id="agenda-table" class="table">
          <thead><tr><th>Naam</th><th>Datum</th><th>Locatie</th><th>Trainer(s)</th></tr></thead>
          <tbody><!-- gevuld door agenda.js --></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer id="footer" class="footer"></footer>

  <!-- Scripts -->
  <script defer src="../js/layout.js?v=0.27.3"></script>
  <script defer src="../js/diagnose.js?v=0.3.0"></script>
  <script defer src="../js/sheets.js?v=0.27.4"></script>
  <script defer src="../js/agenda.js?v=0.27.3"></script>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      // Mount topbar
      window.SuperhondUI?.mount?.({ title: 'Superhond', icon: '🐾', home: true });

      // Controleer verbinding met GAS (laat status in topbar zien)
      try {
        const res = await fetch(window.SUPERHOND_EXEC_URL || '', { method: 'HEAD', mode: 'no-cors' });
        window.SuperhondUI?.setOnline?.(true);
      } catch {
        window.SuperhondUI?.setOnline?.(false);
      }

      // Agenda laden (optioneel)
      if (window.SuperhondAgenda?.init) {
        try { await window.SuperhondAgenda.init(); } catch {}
      }
    });
  </script>

  <noscript>
    <p style="padding:1rem;color:#b91c1c">JavaScript is vereist.</p>
  </noscript>
</body>
</html>
